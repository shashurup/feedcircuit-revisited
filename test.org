#+begin_src clojure :results pp
(ns user
  (:require [feedcircuit-revisited.main :as m]
            [feedcircuit-revisited.feed :as f]
            [feedcircuit-revisited.backend :as b]
            [feedcircuit-revisited.schema :as schema]
            [feedcircuit-revisited.datomic-backend :as bda]
            [feedcircuit-revisited.fs-backend :as bfs]
            [feedcircuit-revisited.content :as c]
            [feedcircuit-revisited.ui :as u]
            [feedcircuit-revisited.handler :as handler]
            [feedcircuit-revisited.storage :as storage]
            [feedcircuit-revisited.conf :as conf]
            [feedcircuit-revisited.schema :as s]
            [datomic.client.api :as d]
            [hiccup.core :as html]
            [clojure.zip :as zip]
            [me.raynes.fs :as fs]
            [clojure.xml :as xml]
))
#+end_src

#+RESULTS:
: 
: 

#+begin_src clojure :results pp
(->> (d/index-pull (d/db bda/conn)
                   {:index :avet
                    :selector '[*]
                    :start '[:item/num 42]})
     ;(filter #(= (get-in % [:item/feed :db/id]) 83562883726309))               
     (take 16))
#+end_src

#+RESULTS:
#+begin_example
({:item/link "https://kiwibyrd.org/2021/08/17/21h82/",
  :item/category
  ["Folger Library"
   "Francis Bacon"
   "General François Cartier"
   "TEMPEST"
   "William Friedman"
   "АНБ США"
   "История"
   "Книги"
   "Криптография"
   "Люди"
   "Обман"
   "Разведслужбы"
   "Уильям Фридман"
   "Франсуа Картье"
   "Фрэнсис Бэкон"],
  :item/summary "",
  :item/source-id "http://kiwibyrd.org/?p=5683",
  :item/feed+id [83562883711105 "http://kiwibyrd.org/?p=5683"],
  :item/published "2021-08-17T10:53:55Z",
  :item/num 42,
  :db/id 96757023244452,
  :item/feed #:db{:id 83562883711105},
  :item/title "Бэкон, Tempest и книга Картье, часть 9",
  :item/author ["idboris"]}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/5q_rKjkBTkM/conte-quits-italys-pm-new-bid-build-majority",
  :item/summary
  "<p>The Tuesday resignation of Italian Prime Minister Giuseppe Conte has left the country in what the Italians call a government crisis \"in the dark\" - one which has no obvious solution, according to <a href=\"https://www.barrons.com/news/what-s-next-for-italy-after-pm-conte-s-resignation-01611660906?tesla=y\"><em>AFP</em></a>.</p>",
  :item/source-id "686890 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686890 at https://www.zerohedge.com"],
  :item/published "2021-01-26T15:25:00Z",
  :item/num 42,
  :db/id 101155069755603,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Conte Quits As Italy's PM In New Bid To Build Majority "}
 {:item/link "https://kiwibyrd.org/2021/08/06/21h81/",
  :item/category
  ["История" "Книги" "Математика" "Роджер Пенроуз" "Уильям Клиффорд"],
  :item/summary "",
  :item/source-id "http://kiwibyrd.org/?p=5657",
  :item/feed+id [83562883711105 "http://kiwibyrd.org/?p=5657"],
  :item/published "2021-08-06T10:20:54Z",
  :item/num 43,
  :db/id 96757023244453,
  :item/feed #:db{:id 83562883711105},
  :item/title "Программа Клиффорда как рубеж и перспектива",
  :item/author ["idboris"]}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/6r1QVg8bzLQ/gamestop-halted-after-surging-billionaire-call-buying-tweet",
  :item/summary
  "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">\"Let's Gooooo!!!\" - GameStop Halted After Surging On Billionaire Call-Buying Tweet</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p>Just when you thought it was safe to pile into the shorts again after yesterday's utter farce in GME shares, this morning has seen the mockery continue.</p>\n\n<p>A pre-market buying panic was sold into during the cash session and was about to erase all the gains when suddenly, none other than billionaire VC Chamath Palihapitiya tweeted the following...</p>\n\n<blockquote class=\"twitter-tweet\">\n<p dir=\"ltr\" lang=\"en\" xml:lang=\"en\">Lots of <a href=\"https://twitter.com/search?q=%24GME&amp;src=ctag&amp;ref_src=twsrc%5Etfw\">$GME</a> talk soooooo....<br /><br />\nWe bought Feb $115 calls on <a href=\"https://twitter.com/search?q=%24GME&amp;src=ctag&amp;ref_src=twsrc%5Etfw\">$GME</a> this morning.<br /><br />\nLet’s gooooooo!!!!!!!! <a href=\"https://t.co/XhOKL1fgKN\">https://t.co/XhOKL1fgKN</a> <a href=\"https://t.co/rbcB3Igl15\">pic.twitter.com/rbcB3Igl15</a></p>\n— Chamath Palihapitiya (@chamath) <a href=\"https://twitter.com/chamath/status/1354089928313823232?ref_src=twsrc%5Etfw\">January 26, 2021</a></blockquote>\n<script async=\"\" charset=\"utf-8\" src=\"https://platform.twitter.com/widgets.js\"></script><p>And GME shares immediately spiked higher and were halted...</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-01-26_7-35-13.jpg?itok=YmQ37FB2\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-01-26_7-35-13.jpg?itok=YmQ37FB2\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"65f267be-e41d-4641-ac62-040da900e8e3\" data-responsive-image-style=\"inline_images\" height=\"359\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-01-26_7-35-13.jpg?itok=YmQ37FB2\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>So while yesterday was a Robinhood vs Citadel cage-match, today is billionaire (Ken Griffiin) vs billionaire as Chamath sides with the WallStreetBets crowd...</p>\n\n<blockquote class=\"twitter-tweet\">\n<p dir=\"ltr\" lang=\"en\" xml:lang=\"en\">It's not reddit vs Ken Griffin...<br /><br />\nIt's Chamath vs Ken<br /><br />\nWe have a billionaire vs billionaire rumble in the jungle</p>\n— zerohedge (@zerohedge) <a href=\"https://twitter.com/zerohedge/status/1354091262505340929?ref_src=twsrc%5Etfw\">January 26, 2021</a></blockquote>\n</div>",
  :item/source-id "686909 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686909 at https://www.zerohedge.com"],
  :item/published "2021-01-26T15:41:50Z",
  :item/num 43,
  :db/id 101155069755604,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "\"Let's Gooooo!!!\" - GameStop Halted After Surging On Billionaire Call-Buying Tweet"}
 {:item/link "https://kiwibyrd.org/2021/07/31/21h74/",
  :item/category
  ["8200"
   "NSO Group"
   "Безопасность через неясность"
   "Брэнды"
   "Израиль"
   "Обман"
   "Разведслужбы"],
  :item/summary "",
  :item/source-id "http://kiwibyrd.org/?p=5645",
  :item/feed+id [83562883711105 "http://kiwibyrd.org/?p=5645"],
  :item/published "2021-07-31T09:38:47Z",
  :item/num 44,
  :db/id 96757023244454,
  :item/feed #:db{:id 83562883711105},
  :item/title "Национальные особенности бизнеса на шпионаже",
  :item/author ["idboris"]}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/V34k4_PjnHg/biden-halt-oil-gas-leasing-federal-land",
  :item/summary
  "<p>As previously reported, and as was just confirmed by the WSJ, President Biden on Wednesday will announce that he is halting all new oil and gas leasing on federal territory, \"setting up a confrontation with the oil industry over the future of U.S. energy.\" And since this effectively will suspend all fracking on federal lands (albeit once the extension period expires), this means that contrary to his representations, Biden is in fact banning fracking despite his Aug 31, 2020 proclamation that “I am not banning fracking. Let me say that again. I am not banning fracking, no matter how many times Donald Trump lies about me.\"</p>",
  :item/source-id "686912 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686912 at https://www.zerohedge.com"],
  :item/published "2021-01-26T15:55:22Z",
  :item/num 44,
  :db/id 101155069755605,
  :item/feed #:db{:id 79164837200002},
  :item/title "Biden To Halt Oil, Gas Leasing On Federal Land"}
 {:item/link "https://kiwibyrd.org/2021/07/25/21h73/",
  :item/category
  ["Francis Bacon"
   "The Independent"
   "История"
   "Обман"
   "Управление восприятием"
   "Фрэнсис Бэкон"],
  :item/summary "",
  :item/source-id "http://kiwibyrd.org/?p=5634",
  :item/feed+id [83562883711105 "http://kiwibyrd.org/?p=5634"],
  :item/published "2021-07-25T10:00:44Z",
  :item/num 45,
  :db/id 96757023244455,
  :item/feed #:db{:id 83562883711105},
  :item/title "Философ или клоун? (Бэкон бэспокоит…)",
  :item/author ["idboris"]}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/yBL5a8K1urg/home-prices-soar-45-times-feds-inflation-target-all-us-cities",
  :item/summary
  "<p>The Fed's most frequent lament is that no matter how many trillions in bonds (and stocks and ETFs) it buys or how much liquidity it forehoses into the market, it just can't push inflation higher.</p>",
  :item/source-id "686907 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686907 at https://www.zerohedge.com"],
  :item/published "2021-01-26T16:10:00Z",
  :item/num 45,
  :db/id 101155069755606,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Home Prices Soar At 4.5 Times The Fed's Inflation Target In All US Cities"}
 {:item/link "https://kiwibyrd.org/2021/07/18/21h72/",
  :item/category
  ["Francis Bacon"
   "General François Cartier"
   "William Friedman"
   "История"
   "Книги"
   "Криптография"
   "Люди"
   "Обман"
   "Разведслужбы"
   "Уильям Фридман"
   "Франсуа Картье"
   "Фрэнсис Бэкон"],
  :item/summary "",
  :item/source-id "http://kiwibyrd.org/?p=5609",
  :item/feed+id [83562883711105 "http://kiwibyrd.org/?p=5609"],
  :item/published "2021-07-18T09:51:32Z",
  :item/num 46,
  :db/id 96757023244456,
  :item/feed #:db{:id 83562883711105},
  :item/title "Бэкон, магия и книга Картье, часть 8",
  :item/author ["idboris"]}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/Z6Vc393vUJg/gordon-johnson-expect-tesla-beat-2021-shipment-guidance-and-q4-net-income",
  :item/summary
  "<p>Tesla is set to report earnings on Wednesday after the bell this week and, as such, GLJ's principal Gordon Johnson has released his look into what Q4 numbers could bring. Johnson estimates that Tesla will beat expectations in both its 2021 shipment guidance and its Q4 2020 net income.</p>",
  :item/source-id "686887 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686887 at https://www.zerohedge.com"],
  :item/published "2021-01-26T16:25:00Z",
  :item/num 46,
  :db/id 101155069755607,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Gordon Johnson: Expect Tesla To \"Beat\" On 2021 Shipment Guidance And Q4 Net Income"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/1NmJ02zElr0/top-cbs-execs-suspended-after-la-times-exposes-widening-allegations-racist-sexist-conduct",
  :item/summary
  "<p>Two top <em>CBS</em> executives have been suspended following a <a href=\"https://www.latimes.com/entertainment-arts/business/story/2021-01-24/cbs-television-stations-peter-dunn-racism-sexism\"><em>LA Times</em></a> investigation detailing \"widening allegations that the pair cultivated an environment that included <strong>bullying female managers and blocking efforts to hire and retain Black journalists.</strong>\"</p>",
  :item/source-id "686910 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686910 at https://www.zerohedge.com"],
  :item/published "2021-01-26T16:40:00Z",
  :item/num 47,
  :db/id 101155069755608,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Top CBS Execs Suspended After LA Times Exposes 'Widening Allegations' Of Racist, Sexist Conduct"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/bz2Y_DZN3fQ/remote-workers-robinhoodrs-routed-critical-internet-services-suffer-major-east-coast-outage",
  :item/summary
  "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">Remote-Workers & Robinhood'rs Routed As Critical Internet Services Suffer Major East Coast Outage</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p>Users of Zoom, YouTube, Google, Gmail, Google Meet, Robinhood, Slack, Spotify, and Amazon Web Services are reporting issues or outages on Tuesday morning, according to <a href=\"https://downdetector.com/\">Downdetector</a>.</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-01-26%20%281%29.png?itok=clLeWXwp\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-01-26%20%281%29.png?itok=clLeWXwp\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"6ad815f4-c2ec-4aa8-bfeb-6975e869b927\" data-responsive-image-style=\"inline_images\" height=\"471\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-01-26%20%281%29.png?itok=clLeWXwp\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p><strong>These web services are critical for remote working folks and could cause disruptions.</strong></p>\n\n<p>Zoom users are reporting issues or outages across Mid-Atlantic and Northeast states.</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-01-26%20%282%29.png?itok=6om-JzUD\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-01-26%20%282%29.png?itok=6om-JzUD\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"e0a88687-c106-4f73-baf7-097647f084af\" data-responsive-image-style=\"inline_images\" height=\"471\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-01-26%20%282%29.png?itok=6om-JzUD\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>The same goes for users of Google...</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-01-26%20%284%29.png?itok=SnYE8piz\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-01-26%20%284%29.png?itok=SnYE8piz\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"c3b32e0d-8196-490b-8800-f4567d1528ef\" data-responsive-image-style=\"inline_images\" height=\"522\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-01-26%20%284%29.png?itok=SnYE8piz\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>..and we all know who is to blame...</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-01-26%20%283%29.png?itok=oifNgsVn\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-01-26%20%283%29.png?itok=oifNgsVn\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"7fc11b1c-a992-4330-939e-727b7067b040\" data-responsive-image-style=\"inline_images\" height=\"591\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-01-26%20%283%29.png?itok=oifNgsVn\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p><em>Developing...</em></p>\n</div>\n      <span class=\"field field--name-uid field--type-entity-reference field--label-hidden\" rel=\"schema:author\"><a about=\"https://cms.zerohedge.com/users/tyler-durden\" class=\"username\" datatype=\"\" href=\"https://cms.zerohedge.com/users/tyler-durden\" lang=\"\" property=\"schema:name\" title=\"View user profile.\" typeof=\"schema:Person\" xml:lang=\"\">Tyler Durden</a></span>\n<span class=\"field field--name-created field--type-created field--label-hidden\" content=\"2021-01-26T16:56:09+00:00\" property=\"schema:dateCreated\">Tue, 01/26/2021 - 11:56</span>",
  :item/source-id "686920 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686920 at https://www.zerohedge.com"],
  :item/published "2021-01-26T16:56:09Z",
  :item/num 48,
  :db/id 101155069755609,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Remote-Workers & Robinhood'rs Routed As Critical Internet Services Suffer Major East Coast Outage"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/kVxPcbBZ9io/nancy-and-paul-pelosi-bought-more-1-million-tesla-disney-and-apple-calls-december",
  :item/summary
  "<p>When one looks at a situation like Monday's insanity-fueled, retail induced <a href=\"https://www.zerohedge.com/markets/daytrading-army-unleashes-furious-cascade-short-squeeze-meltups\">short squeeze</a> across the board, one must ask:<em> who are the government officials that have allowed this to happen and what have they been doing during the time they should be regulating such multiple-sigma market absurdities</em>?</p>",
  :item/source-id "686781 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686781 at https://www.zerohedge.com"],
  :item/published "2021-01-26T17:10:00Z",
  :item/num 49,
  :db/id 101155069755610,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Nancy And Paul Pelosi Bought More Than $1 Million In Tesla, Disney And Apple Calls In December"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/BlMx25wfm1I/target-give-all-hourly-employees-500-bonus",
  :item/summary
  "<p><em>By Marianne Wilson of <a href=\"https://chainstoreage.com/target-give-employees-500-bonus\">Chain Store Age,</a></em></p>\n\n<p>On the heels of a strong holiday season, Target is paying out its fifth round of employee bonuses during the pandemic.</p>",
  :item/source-id "686900 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686900 at https://www.zerohedge.com"],
  :item/published "2021-01-26T17:25:00Z",
  :item/num 50,
  :db/id 101155069755611,
  :item/feed #:db{:id 79164837200002},
  :item/title "Target To Give All Hourly Employees $500 Bonus"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/4V-mGtASYyw/budweiser-pepsi-other-prominent-brands-pass-years-superbowl",
  :item/summary
  "<p><em>Submitted by Market Crumbs</em></p>\n\n<p class=\"XzvDs _208Ie ljrnk blog-post-text-font blog-post-text-color _2QAo- _25MYV _1Fao9 ljrnk public-DraftStyleDefault-block-depth0 public-DraftStyleDefault-text-ltr\" id=\"viewer-aiuk6\"><span class=\"vkIF2 public-DraftStyleDefault-ltr\"><span style=\"color: rgb(0, 0, 0);\">This year's Super Bowl was long destined to be a far cry from the usual spectacle as a result of the pandemic. Super Bowl LV, which will be held at Tampa's Raymond James Stadium, will see </span><a class=\"_2qJYG blog-link-hashtag-color _2xVcV\" href=\"https://www.espn.com/nfl/story/_/id/30758819/vaccinated-health-workers-22000-fans-attendance-super-bowl-lv\" rel=\"noopener\" target=\"_blank\"><u class=\"sDZYg\">only 22,000 fans</u></a><span style=\"color: rgb(0, 0, 0);\"> witness the game in person compared to a stadium capacity of 65,000.</span><span style=\"color: rgb(72, 73, 74);\"> </span></span></p>",
  :item/source-id "686883 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686883 at https://www.zerohedge.com"],
  :item/published "2021-01-26T17:45:00Z",
  :item/num 51,
  :db/id 101155069755612,
  :item/feed #:db{:id 79164837200002},
  :item/title
  "Budweiser, Pepsi, Other Prominent Brands Pass On This Year's Superbowl"}
 {:item/link
  "http://feedproxy.google.com/~r/zerohedge/feed/~3/kxH_K6enJy0/chart-explains-larry-fink-green-agenda",
  :item/summary
  "<p>Earlier today, Blackrock founder and billionaire Larry Fink <a href=\"https://www.cnbc.com/video/2021/01/26/blackrock-ceo-larry-fink-annual-letter-sustainability.html\">took over the CNBC airwaves</a>, and the favorite scribe of the ultra rich, Andrew Ross Sorkin, penned an article in the NYT about how \"<a href=\"https://www.nytimes.com/2021/01/26/business/dealbook/larry-fink-letter-blackrock-climate.html\">BlackRock Chief Pushes a Big New Climate Goal for the Corporate World</a>\" in which he said that \"Larry Fink is using his firm’s huge influence to pressure companies to eliminate greenhouse gas emissions by 2050.\" Which, of course, is an amusing take - the Blackrock CEO led a similar \"crusade\" against buybacks in 2013-2016 with absolutely zero success and in fact, buybacks exploded in 2017 and 2018 after Trump allowed offshore tax repatriation, leaving companies more indebted than ever and more prone to failure once a catastrophic event happened. Such as covid.</p>",
  :item/source-id "686928 at https://www.zerohedge.com",
  :item/has-content true,
  :item/feed+id [79164837200002 "686928 at https://www.zerohedge.com"],
  :item/published "2021-01-26T18:06:19Z",
  :item/num 52,
  :db/id 101155069755613,
  :item/feed #:db{:id 79164837200002},
  :item/title "The Chart That Explains Larry Fink's \"Green\" Agenda"})

#+end_example

#+begin_src clojure :results pp
(map first
     (d/q '[:find (pull ?u [:user/id :user/styles {:user-feed/_user [:user-feed/num :user-feed/position :user-feed/feed]}])
            :where [?u :user/id "georgy@kibardin.name"]]
           (d/db s/db-conn)))
#+end_src

#+RESULTS:
: (#:user{:id "georgy@kibardin.name",
:         :styles
:         ["arstechnica.com https://shashurup.github.io/feedcircuit-styles/arstechnica.css"
:          "habr.com https://shashurup.github.io/feedcircuit-styles/img-data-src.js"]})
: 

#+begin_src clojure :results pp
(d/q '[:find (pull ?e [*])
       :where (?e :feed/url _)]
     (d/db s/db-conn))
#+end_src

#+RESULTS:
#+begin_example
[[{:db/id 79164837199971,
   :feed/url "http://sgolub.ru/feed/",
   :feed/title "АВТОРСКИЙ ПРОЕКТ СЕРГЕЯ ГОЛУБИЦКОГО",
   :feed/summary "Авторский проект Сергея Голубицкого",
   :feed/image
   "http://sgolub.ru/wp-content/uploads/image/4/cropped-sgolub2014_sm2-32x32.jpg"}]
 [{:db/id 79164837209002,
   :feed/url "https://www.archlinux.org/feeds/news/",
   :feed/title "Arch Linux: Recent news updates",
   :feed/summary
   "The latest and greatest news from the Arch Linux distribution."}]
 [{:db/id 83562883714910,
   :feed/url "http://feeds.feedburner.com/PythonInsider",
   :feed/title "Python Insider",
   :feed/published "2021-10-14T05:57:27.179-04:00"}]
 [{:db/id 83562883721314,
   :feed/url "https://bikepost.ru/rss/index/",
   :feed/title "БайкПост",
   :feed/summary "БайкПост / RSS channel"}]
 [{:db/id 83562883726309,
   :feed/url "https://exler.ru/films/rss.xml",
   :feed/title "Exler.ru",
   :feed/summary "Кинорецензии"}]
 [{:db/id 87960930222207,
   :feed/url "https://news.ycombinator.com/rss",
   :feed/title "Hacker News",
   :feed/summary
   "Links for the intellectually curious, ranked by readers."}]
 [{:db/id 87960930231160,
   :feed/url "https://clojure.org/feed.xml",
   :feed/title "Clojure News",
   :feed/summary "Clojure News",
   :feed/published "2021-10-14T16:47:17Z"}]
 [{:db/id 87960930232158,
   :feed/url "http://blog.cleancoder.com/atom.xml",
   :feed/title "The Clean Code Blog",
   :feed/published "2021-09-25T15:47:52+00:00"}]
 [{:db/id 87960930232195,
   :feed/url "https://www.kommersant.ru/RSS/Autopilot_on.xml",
   :feed/title "Коммерсантъ Автопилот. Online и Новости",
   :feed/summary
   "ИД \"Коммерсантъ\" - Коммерсантъ Автопилот. Online и Новости",
   :feed/image "https://im.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 87960930239514,
   :feed/url "https://www.kommersant.ru/RSS/section-world.xml",
   :feed/title "\"Коммерсантъ\". В мире",
   :feed/summary "Материалы раздела \"В мире\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976737250,
   :feed/url "https://www.kommersant.ru/RSS/section-politics.xml",
   :feed/title "\"Коммерсантъ\". Политика",
   :feed/summary "Материалы раздела \"Политика\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976737503,
   :feed/url "http://4pda.ru/feed/",
   :feed/title "4PDA",
   :feed/summary "RSS-лента 4PDA"}]
 [{:db/id 92358976743133,
   :feed/url "https://www.kommersant.ru/RSS/section-hitech.xml",
   :feed/title "\"Коммерсантъ Hi-Tech\"",
   :feed/summary "Материалы раздела \"Hi-Tech\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976746147,
   :feed/url "http://feeds.arstechnica.com/arstechnica/index/",
   :feed/title "Ars Technica",
   :feed/summary
   "Serving the Technologist for more than a decade. IT news, reviews, and analysis.",
   :feed/image
   "https://cdn.arstechnica.net/wp-content/uploads/2016/10/cropped-ars-logo-512_480-32x32.png"}]
 [{:db/id 92358976748901,
   :feed/url "https://content.novayagazeta.ru/rss/all.xml",
   :feed/title "Новая Газета",
   :feed/summary
   "Журналистские расследования о коррупции в бизнесе и во власти, специальные репортажи с событий политической и культурной жизни, главные новости, галереи, онлайн-кинотеатр, мнения и рецензии ведущих журналистов и экспертов страны",
   :feed/image
   "https://content.novayagazeta.ru/assets/rss-6b5763e8155006d9365b340599231d9eb0fa9418d847b50387c087918531804c.png"}]
 [{:db/id 96757023253490,
   :feed/url "https://www.anandtech.com/rss/",
   :feed/title "AnandTech",
   :feed/summary
   "This channel features the latest computer hardware related articles.",
   :feed/image "http://www.anandtech.com/content/images/rss_logo.png"}]
 [{:db/id 96757023256601,
   :feed/url "http://rss.slashdot.org/Slashdot/slashdotMain",
   :feed/title "Slashdot",
   :feed/summary "News for nerds, stuff that matters",
   :feed/image ""}]
 [{:db/id 101155069759377,
   :feed/url "http://www.opennet.ru/opennews/opennews_all.rss",
   :feed/title "OpenNews.opennet.ru: Общая лента новостей",
   :feed/summary
   "OpenNews - Новости мира открытых систем (Общая лента новостей)"}]
 [{:db/id 101155069764563,
   :feed/url "http://4pda.to/feed/",
   :feed/title "4PDA",
   :feed/summary "RSS-лента 4PDA"}]
 [{:db/id 101155069770926,
   :feed/url "https://xkcd.com/atom.xml",
   :feed/title "xkcd.com",
   :feed/published "2021-10-13T00:00:00Z"}]
 [{:db/id 101155069787727,
   :feed/url "https://kiwibyrd.org/feed/",
   :feed/title "kiwi  arXiv",
   :feed/summary
   "СЮЖЕТЫ & РАССЛЕДОВАНИЯ: мемориально-футуристический склад им. Киви Бёрда (1998-2018)",
   :feed/image "https://s0.wp.com/i/buttonw-com.png"}]
 [{:db/id 105553116280785,
   :feed/url "https://www.computerra.ru/feed/",
   :feed/title "Компьютерра",
   :feed/summary
   "Компьютерра — все новости про новые технологии, IT, инновации, интернет и науку.",
   :feed/image
   "https://www.computerra.ru/wp-content/uploads/2020/10/cropped-dummy.jpg"}]
 [{:db/id 105553116292313,
   :feed/url "http://comicfeeds.chrisbenard.net/view/dilbert/default",
   :feed/title "Dilbert Daily Strip",
   :feed/published "2021-10-15T00:00:00-07:00"}]
 [{:db/id 105553116297227,
   :feed/url "https://lenta.ru/rss",
   :feed/title "Lenta.ru : Новости",
   :feed/summary
   "Новости, статьи, фотографии, видео. Семь дней в неделю, 24 часа в сутки.",
   :feed/image "https://lenta.ru/images/small_logo.png"}]
 [{:db/id 105553116300794,
   :feed/url "http://static.feed.rbc.ru/rbc/logical/footer/news.rss",
   :feed/title "www.rbc.ru",
   :feed/summary "",
   :feed/published "2021-06-08T16:52:42Z",
   :feed/image "http://pics.rbc.ru/img/fp_v4/skin/img/v6-logo.png"}]
 [{:db/id 114349209310844,
   :feed/url "https://www.archlinux.org/feeds/packages/",
   :feed/title "Arch Linux: Recent package updates",
   :feed/summary
   "Recently updated packages in the Arch Linux package repositories."}]
 [{:db/id 114349209312756,
   :feed/url "https://habr.com/ru/rss/best/daily/",
   :feed/title "Лучшие публикации за сутки",
   :feed/summary "Лучшие публикации за последние 24 часа",
   :feed/published "2021-10-15T13:13:11Z",
   :feed/image
   "https://habrastorage.org/webt/ym/el/wk/ymelwk3zy1gawz4nkejl_-ammtc.png"}]
 [{:db/id 114349209314888,
   :feed/url "https://www.zerohedge.com/fullrss2.xml",
   :feed/title "ZeroHedge News",
   :feed/summary ""}]
 [{:db/id 114349209321077,
   :feed/url "http://feeds.feedburner.com/zerohedge/feed",
   :feed/title "ZeroHedge News",
   :feed/summary ""}]]

#+end_example

#+name: scratch
#+begin_src clojure :results pp :wrap src clojure
(letfn [(safe-parse [xml]
         (try
           (xml/parse xml)
           (catch Exception e nil)))]
  (->> (fs/list-dir (fs/expand-home "~/devel/fc-stat/rss"))
       (take 1024)
       (map #(do (println (str %)) %))
       (map safe-parse)
       (filter some?)
       ;(map f/extract-rss-items)
       ;(map #(map f/parse-rss-item %))
       count
))
#+end_src

#+RESULTS: scratch
#+begin_src clojure
13
#+end_src


#+begin_src clojure :results pp :wrap src clojure
(send f/feed-index f/init-feed-index "fc-data")
#+end_src

#+RESULTS:
#+begin_src clojure
#<Agent@775609e6: 
  {"http://sgolub.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
    :item-count 26,
    :known-ids
    #{"http://sgolub.ru/?p=13463" "http://sgolub.ru/?p=13611"
      "http://sgolub.ru/?p=13654" "http://sgolub.ru/?p=13520"
      "http://sgolub.ru/?p=13558" "http://sgolub.ru/?p=13684"
      "http://sgolub.ru/?p=13551" "http://sgolub.ru/?p=13458"
      "http://sgolub.ru/?p=13505" "http://sgolub.ru/?p=13511"
      "http://sgolub.ru/?p=13564" "http://sgolub.ru/?p=13584"
      "http://sgolub.ru/?p=13546" "http://sgolub.ru/?p=13580"
      "http://sgolub.ru/?p=13515" "http://sgolub.ru/?p=13473"
      "http://sgolub.ru/?p=13526" "http://sgolub.ru/?p=13538"
      "http://sgolub.ru/?p=13477" "http://sgolub.ru/?p=13643"
      "http://sgolub.ru/?p=13530" "http://sgolub.ru/?p=13571"
      "http://sgolub.ru/?p=13576" "http://sgolub.ru/?p=13595"
      "http://sgolub.ru/?p=13602" "http://sgolub.ru/?p=13534"}},
   "https://news.ycombinator.com/rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss"},
   "http://www.opennet.ru/opennews/opennews_all.rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss"},
   "https://www.kommersant.ru/RSS/section-politics.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml"},
   "http://4pda.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed."},
   "https://clojure.org/feed.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
    :item-count 25,
    :known-ids
    #{"news/2011/07/22/introducing-clojurescript"
      "news/2014/08/06/transducers-are-coming"
      "news/2012/05/08/reducers" "news/2012/02/17/clojure-governance"
      "news/2016/01/19/clojure18"
      "news/2018/03/19/state-of-clojure-2018"
      "news/2013/06/28/clojure-clore-async-channels"
      "news/2019/02/04/state-of-clojure-2019"
      "news/2012/05/15/anatomy-of-reducer"
      "news/2020/01/07/clojure-2020-survey" "news/2018/01/05/git-deps"
      "news/2019/06/06/clojure1-10-1"
      "news/2019/01/07/clojure-2019-survey"
      "news/2015/06/30/clojure-17"
      "news/2016/01/28/state-of-clojure-2015"
      "news/2016/05/23/introducing-clojure-spec"
      "news/2019/07/25/clojure-forum"
      "news/2020/07/23/cognitect-joins-nubank"
      "news/2017/12/08/clojure19" "news/2019/05/16/jira-migration"
      "news/2020/02/28/clojure-tap"
      "news/2020/02/20/state-of-clojure-2020"
      "news/2017/01/31/state-of-clojure-2016"
      "news/2018/12/17/clojure110"
      "news/2016/01/14/clojure-org-live"}},
   "https://www.archlinux.org/feeds/news/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news."},
   "https://www.anandtech.com/rss/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss."},
   "https://www.kommersant.ru/RSS/section-hitech.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml"},
   "http://blog.cleancoder.com/atom.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml"},
   "https://www.kommersant.ru/RSS/Autopilot_on.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml"},
   "https://bikepost.ru/rss/index/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index."},
   "http://rss.slashdot.org/Slashdot/slashdotMain"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain"},
   "http://feeds.arstechnica.com/arstechnica/index/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index."},
   "https://www.computerra.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed."},
   "https://exler.ru/films/rss.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml"},
   "https://xkcd.com/atom.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml"},
   "https://content.novayagazeta.ru/rss/all.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml"},
   "https://www.kommersant.ru/RSS/section-world.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml"},
   "https://www.archlinux.org/feeds/packages/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages."},
   "https://habr.com/ru/rss/best/daily/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/habr.com.ru.rss.best.daily."},
   "http://comicfeeds.chrisbenard.net/view/dilbert/default"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default"},
   "https://www.zerohedge.com/fullrss2.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml"},
   "https://lenta.ru/rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss"},
   "https://kiwibyrd.org/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
    :item-count 27,
    :known-ids
    #{"http://kiwibyrd.org/?p=3987" "http://kiwibyrd.org/?p=4020"
      "http://kiwibyrd.org/?p=4075" "http://kiwibyrd.org/?p=4102"
      "http://kiwibyrd.org/?p=4081" "http://kiwibyrd.org/?p=4093"
      "http://kiwibyrd.org/?p=4068" "http://kiwibyrd.org/?p=3994"
      "http://kiwibyrd.org/?p=4175" "http://kiwibyrd.org/?p=4041"
      "http://kiwibyrd.org/?p=4152" "http://kiwibyrd.org/?p=4165"
      "http://kiwibyrd.org/?p=3989" "http://kiwibyrd.org/?p=4181"
      "http://kiwibyrd.org/?p=3964" "http://kiwibyrd.org/?p=3977"
      "http://kiwibyrd.org/?p=4003" "http://kiwibyrd.org/?p=4233"
      "http://kiwibyrd.org/?p=4144" "http://kiwibyrd.org/?p=4210"
      "http://kiwibyrd.org/?p=4028" "http://kiwibyrd.org/?p=4136"
      "http://kiwibyrd.org/?p=4113" "http://kiwibyrd.org/?p=4222"
      "http://kiwibyrd.org/?p=4050" "http://kiwibyrd.org/?p=4056"
      "http://kiwibyrd.org/?p=3970"}},
   "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}}>
#+end_src

#+begin_src clojure :results pp :wrap src clojure
@f/feed-index
#+end_src

#+RESULTS:
#+begin_src clojure
{"http://sgolub.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
  :item-count 26,
  :known-ids
  #{"http://sgolub.ru/?p=13463" "http://sgolub.ru/?p=13611"
    "http://sgolub.ru/?p=13654" "http://sgolub.ru/?p=13520"
    "http://sgolub.ru/?p=13558" "http://sgolub.ru/?p=13684"
    "http://sgolub.ru/?p=13551" "http://sgolub.ru/?p=13458"
    "http://sgolub.ru/?p=13505" "http://sgolub.ru/?p=13511"
    "http://sgolub.ru/?p=13564" "http://sgolub.ru/?p=13584"
    "http://sgolub.ru/?p=13546" "http://sgolub.ru/?p=13580"
    "http://sgolub.ru/?p=13515" "http://sgolub.ru/?p=13473"
    "http://sgolub.ru/?p=13526" "http://sgolub.ru/?p=13538"
    "http://sgolub.ru/?p=13477" "http://sgolub.ru/?p=13643"
    "http://sgolub.ru/?p=13530" "http://sgolub.ru/?p=13571"
    "http://sgolub.ru/?p=13576" "http://sgolub.ru/?p=13595"
    "http://sgolub.ru/?p=13602" "http://sgolub.ru/?p=13534"}},
 "https://news.ycombinator.com/rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss"},
 "http://www.opennet.ru/opennews/opennews_all.rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss"},
 "https://www.kommersant.ru/RSS/section-politics.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml"},
 "http://4pda.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed."},
 "https://clojure.org/feed.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
  :item-count 25,
  :known-ids
  #{"news/2011/07/22/introducing-clojurescript"
    "news/2014/08/06/transducers-are-coming" "news/2012/05/08/reducers"
    "news/2012/02/17/clojure-governance" "news/2016/01/19/clojure18"
    "news/2018/03/19/state-of-clojure-2018"
    "news/2013/06/28/clojure-clore-async-channels"
    "news/2019/02/04/state-of-clojure-2019"
    "news/2012/05/15/anatomy-of-reducer"
    "news/2020/01/07/clojure-2020-survey" "news/2018/01/05/git-deps"
    "news/2019/06/06/clojure1-10-1"
    "news/2019/01/07/clojure-2019-survey" "news/2015/06/30/clojure-17"
    "news/2016/01/28/state-of-clojure-2015"
    "news/2016/05/23/introducing-clojure-spec"
    "news/2019/07/25/clojure-forum"
    "news/2020/07/23/cognitect-joins-nubank"
    "news/2017/12/08/clojure19" "news/2019/05/16/jira-migration"
    "news/2020/02/28/clojure-tap"
    "news/2020/02/20/state-of-clojure-2020"
    "news/2017/01/31/state-of-clojure-2016"
    "news/2018/12/17/clojure110" "news/2016/01/14/clojure-org-live"}},
 "https://www.archlinux.org/feeds/news/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news."},
 "https://www.anandtech.com/rss/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss."},
 "https://www.kommersant.ru/RSS/section-hitech.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml"},
 "http://blog.cleancoder.com/atom.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml"},
 "https://www.kommersant.ru/RSS/Autopilot_on.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml"},
 "https://bikepost.ru/rss/index/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index."},
 "http://rss.slashdot.org/Slashdot/slashdotMain"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain"},
 "http://feeds.arstechnica.com/arstechnica/index/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index."},
 "https://www.computerra.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed."},
 "https://exler.ru/films/rss.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml"},
 "https://xkcd.com/atom.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml"},
 "https://content.novayagazeta.ru/rss/all.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml"},
 "https://www.kommersant.ru/RSS/section-world.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml"},
 "https://www.archlinux.org/feeds/packages/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages."},
 "https://habr.com/ru/rss/best/daily/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/habr.com.ru.rss.best.daily."},
 "http://comicfeeds.chrisbenard.net/view/dilbert/default"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default"},
 "https://www.zerohedge.com/fullrss2.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml"},
 "https://lenta.ru/rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss"},
 "https://kiwibyrd.org/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
  :item-count 27,
  :known-ids
  #{"http://kiwibyrd.org/?p=3987" "http://kiwibyrd.org/?p=4020"
    "http://kiwibyrd.org/?p=4075" "http://kiwibyrd.org/?p=4102"
    "http://kiwibyrd.org/?p=4081" "http://kiwibyrd.org/?p=4093"
    "http://kiwibyrd.org/?p=4068" "http://kiwibyrd.org/?p=3994"
    "http://kiwibyrd.org/?p=4175" "http://kiwibyrd.org/?p=4041"
    "http://kiwibyrd.org/?p=4152" "http://kiwibyrd.org/?p=4165"
    "http://kiwibyrd.org/?p=3989" "http://kiwibyrd.org/?p=4181"
    "http://kiwibyrd.org/?p=3964" "http://kiwibyrd.org/?p=3977"
    "http://kiwibyrd.org/?p=4003" "http://kiwibyrd.org/?p=4233"
    "http://kiwibyrd.org/?p=4144" "http://kiwibyrd.org/?p=4210"
    "http://kiwibyrd.org/?p=4028" "http://kiwibyrd.org/?p=4136"
    "http://kiwibyrd.org/?p=4113" "http://kiwibyrd.org/?p=4222"
    "http://kiwibyrd.org/?p=4050" "http://kiwibyrd.org/?p=4056"
    "http://kiwibyrd.org/?p=3970"}},
 "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}}
#+end_src


#+begin_src clojure :results output
(m/_run-srv)
#+end_src

#+RESULTS:
#+begin_example
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.stat invoke
INFO: Starting statistics collection
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.feed invoke
INFO: Starting sync by the timer
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.stat invoke
INFO: Collecting statistics for  http://sgolub.ru/feed/
2020-11-24 18:46:22.990:INFO:oejs.Server:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.8+10
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.feed invoke
INFO: Getting news from http://sgolub.ru/feed/
2020-11-24 18:46:23.020:INFO:oejs.AbstractConnector:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: Started ServerConnector@52bb0385{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
2020-11-24 18:46:23.020:INFO:oejs.Server:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: Started @15808ms
#+end_example

#+begin_src clojure :results pp
(m/_restart-srv)
#+end_src

#+RESULTS:
: #'feedcircuit-revisited.main/_srv
: 2020-10-10 15:54:02.952:INFO:oejs.AbstractConnector:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Stopped ServerConnector@43a4a014{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
: 2020-10-10 15:54:02.954:INFO:oejs.Server:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.8+10
: 2020-10-10 15:54:02.956:INFO:oejs.AbstractConnector:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Started ServerConnector@da12376{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
: 2020-10-10 15:54:02.956:INFO:oejs.Server:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Started @13293357ms

#+begin_src clojure :results pp :wrap src clojure
(f/sync!)
#+end_src

#+RESULTS:
#+BEGIN_src clojure
(["https://news.ycombinator.com/rss" 30]
 ["https://clojure.org/feed.xml" 0]
 ["https://www.archlinux.org/feeds/news/" 0]
 ["https://www.anandtech.com/rss/" 0]
 ["http://blog.cleancoder.com/atom.xml" 0]
 ["http://rss.slashdot.org/Slashdot/slashdotMain" 15]
 ["http://feeds.arstechnica.com/arstechnica/index/" 0]
 ["https://www.computerra.ru/feed/" 1]
 ["https://xkcd.com/atom.xml" 0]
 ["https://www.kommersant.ru/RSS/section-world.xml" 3]
 ["https://www.zerohedge.com/fullrss2.xml" 1]
 ["http://static.feed.rbc.ru/rbc/logical/footer/news.rss" 1])
июн. 08, 2020 9:56:03 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://news.ycombinator.com/rss
июн. 08, 2020 9:56:04 AM feedcircuit-revisited.feed invoke
INFO: Got 30 item from https://news.ycombinator.com/rss
июн. 08, 2020 9:56:04 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://clojure.org/feed.xml
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://clojure.org/feed.xml
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.archlinux.org/feeds/news/
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://www.archlinux.org/feeds/news/
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.anandtech.com/rss/
июн. 08, 2020 9:56:07 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://www.anandtech.com/rss/
июн. 08, 2020 9:56:07 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://blog.cleancoder.com/atom.xml
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from http://blog.cleancoder.com/atom.xml
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://rss.slashdot.org/Slashdot/slashdotMain
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 15 item from http://rss.slashdot.org/Slashdot/slashdotMain
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://feeds.arstechnica.com/arstechnica/index/
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from http://feeds.arstechnica.com/arstechnica/index/
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.computerra.ru/feed/
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from https://www.computerra.ru/feed/
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://xkcd.com/atom.xml
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://xkcd.com/atom.xml
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.kommersant.ru/RSS/section-world.xml
июн. 08, 2020 9:56:10 AM feedcircuit-revisited.feed invoke
INFO: Got 3 item from https://www.kommersant.ru/RSS/section-world.xml
июн. 08, 2020 9:56:10 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.zerohedge.com/fullrss2.xml
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from https://www.zerohedge.com/fullrss2.xml
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://static.feed.rbc.ru/rbc/logical/footer/news.rss
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from http://static.feed.rbc.ru/rbc/logical/footer/news.rss
#+END_src

#+begin_src clojure :results pp :wrap src clojure
@f/feed-dir
#+end_src

#+RESULTS:
#+BEGIN_src clojure
{"http://sgolub.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
 "https://news.ycombinator.com/rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss",
 "http://www.opennet.ru/opennews/opennews_all.rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss",
 "https://www.kommersant.ru/RSS/section-politics.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml",
 "http://4pda.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed.",
 "https://clojure.org/feed.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
 "https://www.archlinux.org/feeds/news/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news.",
 "https://www.anandtech.com/rss/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss.",
 "https://www.kommersant.ru/RSS/section-hitech.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml",
 "http://blog.cleancoder.com/atom.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml",
 "https://www.kommersant.ru/RSS/Autopilot_on.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml",
 "https://bikepost.ru/rss/index/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index.",
 "http://rss.slashdot.org/Slashdot/slashdotMain"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain",
 "http://feeds.arstechnica.com/arstechnica/index/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index.",
 "https://www.computerra.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed.",
 "https://exler.ru/films/rss.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml",
 "https://xkcd.com/atom.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml",
 "https://content.novayagazeta.ru/rss/all.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml",
 "https://www.kommersant.ru/RSS/section-world.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml",
 "https://www.archlinux.org/feeds/packages/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages.",
 "http://comicfeeds.chrisbenard.net/view/dilbert/default"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default",
 "https://www.zerohedge.com/fullrss2.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml",
 "https://lenta.ru/rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss",
 "https://kiwibyrd.org/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
 "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}
#+END_src

#+begin_src clojure :results pp :wrap src clojure
(c/detect (c/retrieve-and-parse "https://bikepost.ru/blog/91216/Ocherednoj-raz-vokrug-Ladogi.html") "https://bikepost.ru" nil)
#+end_src

#+RESULTS:
#+BEGIN_src clojure
class java.net.MalformedURLExceptionclass java.lang.NullPointerExceptionExecution error (NullPointerException) at java.net.URL/<init> (URL.java:585).
null
#+END_src

#+begin_src restclient
POST http://localhost:8080/selected
Cookie: sessionid=bqn1psy1rdw0lt2ky1gj25b246j4pmaf; ring-session=6nzW7ugyC7mtjrvf0cEPl8p0YuPdp2v5TrpOkGH0ktuoLFZ5vLYjE3OPKBlUthOcpE9qs%2B8IrAhrwI5rCVH7RoGnj3WCKvbSr81U0jtQvw5TD8XAXXVvw2tPdxzIN79D--UbgPoufD0NaRHjlahfABuco0LfEV31LEkJWGLjOyCl8%3D
Content-Type: application/x-www-form-urlencoded

id=https://www.exler.ru/films/vampiry-srednej-polosy.htm
#+end_src

#+RESULTS:
#+BEGIN_SRC js
// POST http://localhost:8080/selected
// HTTP/1.1 200 OK
// Date: Sat, 29 May 2021 17:18:47 GMT
// Content-Type: application/octet-stream
// X-XSS-Protection: 1; mode=block
// X-Frame-Options: SAMEORIGIN
// X-Content-Type-Options: nosniff
// Content-Length: 0
// Server: Jetty(9.4.22.v20191022)
// Request duration: 1.246895s
#+END_SRC
