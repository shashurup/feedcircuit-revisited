#+begin_src clojure :results pp
(ns user
  (:require [feedcircuit-revisited.main :as m]
            [feedcircuit-revisited.feed :as f]
            [feedcircuit-revisited.backend :as b]
            [feedcircuit-revisited.schema :as schema]
            [feedcircuit-revisited.datomic-backend :as bda]
            [feedcircuit-revisited.fs-backend :as bfs]
            [feedcircuit-revisited.content :as c]
            [feedcircuit-revisited.ui :as u]
            [feedcircuit-revisited.handler :as handler]
            [feedcircuit-revisited.storage :as storage]
            [feedcircuit-revisited.conf :as conf]
            [feedcircuit-revisited.schema :as s]
            [datomic.client.api :as d]
            [hiccup.core :as html]
            [clojure.zip :as zip]
            [me.raynes.fs :as fs]
            [clojure.xml :as xml]
))
#+end_src

#+begin_src clojure :results pp
;(bda/get-feed-attr-by-id "83562883711106" :feed/id)
(bda/get-feed-attr "http://feeds.feedburner.com/zerohedge/feed" :feed/id)
#+end_src

#+RESULTS:
: "83562883711106"
: 

#+begin_src clojure :results pp
(take 3 (bda/get-items "83562883711106" nil true))
;(take 3 (bda/get-items "79164837200001" nil true))
#+end_src

#+RESULTS:
#+begin_example
(#:item{:link
        "https://www.zerohedge.com/political/wsj-editorial-board-says-choice-fed-chief-between-tweedledum-tweedledee",
        :id "92358976735549",
        :summary
        "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">WSJ Editorial Board Says Choice For Fed Chief Is Between \"Tweedledum & Tweedledee\"</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p><a href=\"https://www.theepochtimes.com/wsj-editorial-board-says-choice-for-federal-reserve-chief-is-between-tweedledum-and-tweedledee_4111080.html?utm_source=partner&amp;utm_campaign=ZeroHedge\"><em>Authored by Katabella Roberts via The Epoch Times,</em></a></p>\n\n<p>The <a href=\"https://www.wsj.com/articles/tweedledum-and-tweedledee-at-the-federal-reserve-chairman-candidates-jerome-powell-lael-brainard-inflation-11637187137?mod=hp_opin_pos_1\">Wall Street Journal Editorial Board</a> said Wednesday that the choice between the next chair of the <a href=\"https://www.theepochtimes.com/t-federal-reserve\">Federal Reserve</a> is a choice between “Tweedledum and Tweedledee.”</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/2021-11-19_10-41-11.jpg?itok=DoqMe8Jl\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/2021-11-19_10-41-11.jpg?itok=DoqMe8Jl\"><picture><img alt=\"\" class=\"inline-images image-style-inline-images\" data-entity-type=\"file\" data-entity-uuid=\"d304538b-4af9-4a69-ad57-2a4f5f2fc497\" data-responsive-image-style=\"inline_images\" height=\"332\" src=\"https://assets.zerohedge.com/s3fs-public/styles/inline_image_mobile/public/inline-images/2021-11-19_10-41-11.jpg?itok=DoqMe8Jl\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>President Joe Biden last week met with the two leading candidates, current Chairman Jerome Powell and governor Lael Brainard, ahead of his decision to appoint one of them to a four-year term leading the central bank, beginning next February.</p>\n\n<p>Powell, 68, was appointed chair by former President Donald Trump and is<a href=\"https://www.reuters.com/world/us/powell-or-brainard-biden-weighs-his-pick-us-fed-chair-2021-11-11/\"> seen as a front-runner for the role</a>. His four-year term is set to end in early February. The current Fed chairman has backing from moderate Democrats as well as Republicans, and has notably helped to engineer a rapid and strong recovery from the pandemic recession, although inflation levels across the United States are currently at an all-time high.</p>\n\n<p>Brainard, 59, took office as a member of the </p></div>",
        :source-id "719515 at https://www.zerohedge.com",
        :has-content true,
        :published "2021-11-20T15:30:00Z",
        :num 2231,
        :feed "83562883711106",
        :title
        "WSJ Editorial Board Says Choice For Fed Chief Is Between \"Tweedledum & Tweedledee\"",
        :author ["Tyler Durden"]}
 #:item{:link
        "https://www.zerohedge.com/political/rotterdam-transformed-war-zone-amid-new-covid-lockdown-protests",
        :id "92358976735548",
        :summary
        "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">Rotterdam \"Transformed Into A War Zone\" Amid New COVID Lockdown Protests</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p>On Friday, social unrest flared up across Europe as governments reinstated strict COVID measures such as restrictions for unvaccinated, partial, and full lockdowns amid a wave of new infections. </p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/Snag_22dacb79.png?itok=4VQWIaRN\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/Snag_22dacb79.png?itok=4VQWIaRN\"><picture><img alt=\"\" class=\"inline-images image-style-inline-images\" data-entity-type=\"file\" data-entity-uuid=\"61e0a194-508b-41f4-8174-13828df466be\" data-responsive-image-style=\"inline_images\" height=\"205\" src=\"https://assets.zerohedge.com/s3fs-public/styles/inline_image_mobile/public/inline-images/Snag_22dacb79.png?itok=4VQWIaRN\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>COVID-19 infections are surging in Germany, the Czech Republic, and Greece, and many of these countries are imposing strict public health measures to contain the spread. Austria has gone so far as to enact a nationwide lockdown beginning Monday. </p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/Snag_22aa0489.png?itok=HT-E90ro\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/Snag_22aa0489.png?itok=HT-E90ro\"><picture><img alt=\"\" class=\"inline-images image-style-inline-images\" data-entity-type=\"file\" data-entity-uuid=\"6d35fdba-8dd5-4052-b04a-ac6ad3fd2125\" data-responsive-image-style=\"inline_images\" height=\"454\" src=\"https://assets.zerohedge.com/s3fs-public/styles/inline_image_mobile/public/inline-images/Snag_22aa0489.png?itok=HT-E90ro\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>Riots broke out in downtown Rotterdam during a demonstration against partial lockdowns Friday. Mayor Ahmed Aboutaleb told reporters it was \"an orgy of violence.\" He said, \"on several occasions, the police felt it necessary to draw their weapons to defend themselves\" as rioters set fires, torched cars, threw rocks and other blunt objects at police. </p>\n\n<blockquote>\n<p><em>\"They shot at protesters, and people were injured,\" Aboutaleb said. He couldn't provide an injury report but said police fired warning shots. </em></p></blockquote></div>",
        :source-id "719565 at https://www.zerohedge.com",
        :has-content true,
        :published "2021-11-20T14:55:00Z",
        :num 2230,
        :feed "83562883711106",
        :title
        "Rotterdam \"Transformed Into A War Zone\" Amid New COVID Lockdown Protests",
        :author ["Tyler Durden"]}
 #:item{:link
        "https://www.zerohedge.com/medical/rise-uk-non-covid-deaths-set-continue-cancer-expert",
        :id "92358976735547",
        :summary
        "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">Rise In UK Non-COVID Deaths Set To Continue: Cancer Expert</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p><a href=\"https://www.theepochtimes.com/rise-in-uk-non-covid-deaths-set-to-continue-cancer-expert_4113341.html?utm_source=partner&amp;utm_campaign=ZeroHedge\"><em>Authored by Owen Evans via The Epoch Times,</em></a></p>\n\n<p>One of the world’s foremost cancer experts has said that <strong>British lockdown policies are still having an impact on excess mortality, describing it as a “national scandal.”</strong></p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/ET-doctor12-700x420.jpg?itok=UIRwJPYs\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/ET-doctor12-700x420.jpg?itok=UIRwJPYs\"><picture><img alt=\"\" class=\"inline-images image-style-inline-images\" data-entity-type=\"file\" data-entity-uuid=\"710600ec-7f1d-45f5-9954-102f27cdb2ac\" data-responsive-image-style=\"inline_images\" height=\"300\" src=\"https://assets.zerohedge.com/s3fs-public/styles/inline_image_mobile/public/inline-images/ET-doctor12-700x420.jpg?itok=UIRwJPYs\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>The Telegraph reported that 9,300 more people than usual died in the past four months from non-<a href=\"https://www.theepochtimes.com/mkt_app/giving-the-right-name-to-the-virus-causing-a-worldwide-pandemic-2_3277200.html\">CCP (Chinese Communist Party) virus</a> causes.</p>\n\n<p>The latest figures from the Office for National Statistics show that <strong>England and Wales registered 20,823 more deaths than the five-year average in the past 18 weeks. Only 11,531 deaths involved the CCP virus.</strong></p>\n\n<p>The increase prompted experts such as Professor Carl Heneghan, director of the Centre for Evidence-Based Medicine at the University of Oxford, to call for an urgent investigation.</p>\n\n<blockquote>\n<p>“We urgently need to understand what’s going wrong and an investigation of the root causes to determine those actions that can prevent further unnecessary deaths,” he told the publication.</p>\n</blockquote>\n\n<p><strong>The excess is likely to grow as more deaths are registered in the coming weeks.</strong></p></div>",
        :source-id "719544 at https://www.zerohedge.com",
        :has-content true,
        :published "2021-11-20T14:20:00Z",
        :num 2229,
        :feed "83562883711106",
        :title
        "Rise In UK Non-COVID Deaths Set To Continue: Cancer Expert",
        :author ["Tyler Durden"]})

#+end_example

#+begin_src clojure :results pp
(bda/known-ids nil ["http://kiwibyrd.org/?p=4056" "http://kiwibyrd.org/?p=4068" "1" "blabla" "http://kiwibyrd.org/?p=4050"])
#+end_src

#+RESULTS:
: #{"http://kiwibyrd.org/?p=4068"
:   "http://kiwibyrd.org/?p=4050"
:   "http://kiwibyrd.org/?p=4056"}
: 

#+begin_src clojure :results pp
(bda/get-item "92358976733381")
#+end_src

#+RESULTS:
#+begin_example
#:item{:link
       "http://feedproxy.google.com/~r/zerohedge/feed/~3/2WITJx7ft70/mypillow-ceo-mike-lindell-has-been-permanently-banned-twitter",
       :id "92358976733381",
       :summary
       "<p><a href=\"https://www.theepochtimes.com/twitter-suspends-account-of-mike-lindell-ceo-of-mypillow_3671721.html\"><em>Authored by Mimi Nguyen Ly via The Epoch Times,</em></a></p>\n\n<p><a href=\"https://www.theepochtimes.com/t-twitter\">Twitter</a> late Monday suspended the account of MyPillow founder and CEO <a href=\"https://www.theepochtimes.com/t-mike-lindell\">Mike Lindell</a> on its platform.</p>\n\n<p>Users were faced with an error message,<strong> “You’re trying to follow user that doesn’t exist,” </strong>before the account page simply said that Lindell’s account has been suspended for having violated Twitter rules.</p>",
       :source-id "686872 at https://www.zerohedge.com",
       :has-content true,
       :content
       "<span class=\"field field--name-title field--type-string field--label-hidden\" property=\"schema:name\">MyPillow CEO Mike Lindell Has Been Permanently Banned From Twitter</span>\n\n            <div class=\"clearfix text-formatted field field--name-body field--type-text-with-summary field--label-hidden field__item\" property=\"schema:text\"><p><a href=\"https://www.theepochtimes.com/twitter-suspends-account-of-mike-lindell-ceo-of-mypillow_3671721.html\"><em>Authored by Mimi Nguyen Ly via The Epoch Times,</em></a></p>\n\n<p><a href=\"https://www.theepochtimes.com/t-twitter\">Twitter</a> late Monday suspended the account of MyPillow founder and CEO <a href=\"https://www.theepochtimes.com/t-mike-lindell\">Mike Lindell</a> on its platform.</p>\n\n<p>Users were faced with an error message,<strong> “You’re trying to follow user that doesn’t exist,” </strong>before the account page simply said that Lindell’s account has been suspended for having violated Twitter rules.</p>\n\n<p>Lindell’s personal Twitter account had over half a million followers before being suspended.</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/mypillow-ceo-mike-lindell-600x721.jpg?itok=kL8eWzDE\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/mypillow-ceo-mike-lindell-600x721.jpg?itok=kL8eWzDE\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"505f7387-73aa-4ae9-9188-f777030e1822\" data-responsive-image-style=\"inline_images\" height=\"601\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/mypillow-ceo-mike-lindell-600x721.jpg?itok=kL8eWzDE\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>The Twitter account of MyPillow CEO Mike Lindell just moments after it was suspended. (Twitter/realMikeLindell/Screenshot)</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/mike-lindell-600x540.jpg?itok=RzTfqjc8\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/mike-lindell-600x540.jpg?itok=RzTfqjc8\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"0e9367ec-5c8d-4fa6-994b-df377607feb7\" data-responsive-image-style=\"inline_images\" height=\"450\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/mike-lindell-600x540.jpg?itok=RzTfqjc8\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p>The Twitter account of MyPillow CEO Mike Lindell just moments after it was suspended. (Twitter/realMikeLindell/Screenshot)</p>\n\n<p><strong>Lindell repeatedly violated the company’s civic integrity policy, due to which he was suspended, according to a Twitter spokesperson. </strong>The policy says, in part: “You may not use Twitter’s services for the purpose of manipulating or interfering in elections or other civic processes. This includes posting or sharing content that may suppress participation or mislead people about when, where, or how to participate in a civic process. In addition, we may label and reduce the visibility of Tweets containing false or misleading information about civic processes in order to provide additional context.”</p>\n\n<p>“The public conversation occurring on Twitter is never more important than during elections and other civic events. Any attempts to undermine the integrity of our service is antithetical to our fundamental rights and undermines the core tenets of freedom of expression, the value upon which our company is based.”</p>\n\n<p>Lindell did not immediately respond to a request for comment from The Epoch Times.</p>\n\n<p><strong>A supporter of former President Donald Trump, Lindell was advocating for election integrity amid allegations of widespread voting irregularities and election fraud in the aftermath of the November 2020 general election, which put him under the media spotlight.</strong> Lindell frequently posted political commentary that sometimes questioned the results of the election.</p>\n\n<p>The suspension of Lindell’s Twitter account is the latest in actions taken against Trump and his supporters since the Jan. 6 riots at the U.S. Capitol that resulted violence and a breach of the building.</p>\n\n<p>Trump had repeatedly called for peace and condemned the violence that took place. Despite this, he was <a href=\"https://www.theepochtimes.com/twitter-removes-trump-from-its-platform_3649669.html\">banned from Twitter</a> and other social media platforms, including Twitter, and cut off by some banks, while some of his supporters have also been banned by Twitter and have been fired by employers.</p>\n\n<p><strong>Lindell recently made media headlines after having visited the White House to meet with Trump and was spotted holding some <a href=\"https://www.theepochtimes.com/mike-lindell-visits-trump-in-oval-office-carrying-mysterious-notes_3658971.html\">mysterious notes</a></strong> that, in part, appeared to refer to “martial law.” It was unclear what the notes were about. Lindell told The Epoch Times that the notes were not official and he was helping deliver them from a lawyer who said it was a suggestion for Trump.</p>\n\n<p><a data-image-external-href=\"\" data-image-href=\"/s3/files/inline-images/mike-lindell-1-600x400.jpg?itok=ToOt1Sqb\" data-link-option=\"0\" href=\"https://cms.zerohedge.com/s3/files/inline-images/mike-lindell-1-600x400.jpg?itok=ToOt1Sqb\"><picture><img alt=\"\" data-entity-type=\"file\" data-entity-uuid=\"45d704ec-a32e-4e73-807f-c8abe85cdbbc\" data-responsive-image-style=\"inline_images\" height=\"333\" src=\"https://zh-prod-1cc738ca-7d3b-4a72-b792-20bd8d8fa069.storage.googleapis.com/s3fs-public/styles/inline_image_mobile/public/inline-images/mike-lindell-1-600x400.jpg?itok=ToOt1Sqb\" typeof=\"foaf:Image\" width=\"500\" /></picture></a></p>\n\n<p><em>MyPillow CEO Mike Lindell waits outside the West Wing of the White House before entering in Washington, on Jan. 15, 2021. (Drew Angerer/Getty Images)</em></p>\n\n<p><strong>Lindell is known for his <a href=\"https://www.theepochtimes.com/it-was-divine-intervention-founder-of-mypillow-mike-lindell-went-from-crack-addict-to-ceo_3294836.html\">American dream story</a> of an ex-cocaine addict turning his life around and running a successful business, MyPillow.</strong></p>\n\n<p>Bed Bath & Beyond, Kohl’s, and Wayfair announced they would no longer carry products from MyPillow. Lindell said the actions came after groups such as Sleeping Giants pushed companies to stop doing business with him.</p>\n\n<p>Bed Bath & Beyond <a href=\"https://www.theepochtimes.com/my-pillow-ceo-says-bed-bath-and-beyond-kohls-to-stop-selling-his-products_3662460.html\">told The Epoch Times</a> via email that their decision to stop carrying MyPillow was “data-driven and customer-inspired.”</p>\n\n<p>Sleeping Giants, a leftist activist group, <a href=\"https://www.theepochtimes.com/my-pillow-ceo-says-bed-bath-and-beyond-kohls-to-stop-selling-his-products_3662460.html\">shared</a> the news on Twitter about the companies’ decision to discontinue stocking Lindell’s products. The group accused Lindell of having encouraged the breach of the Capitol by calling for election integrity. Sleeping Giants has ongoing campaigns to pressure companies to shun conservative and right-leaning entities. It also <a href=\"https://twitter.com/slpng_giants/status/1353920899397771264?s=20\">shared the news</a> of Lindell’s suspension from Twitter late on Monday.</p>\n\n<blockquote>\n<p>“These are groups that were hired to attack and crush my companies to cancel MyPillow out. And they’re attacking these people, like Bed Bath & Beyond,” Lindell <a href=\"https://www.theepochtimes.com/mike-lindell-on-cancel-culture-we-have-to-make-a-stand-and-not-back-down_3663266.html\">told NTD News</a> last week. “They succumb to the pressure. And you know, that’s their choice. But you know what, this is the time we all have to stand up against this.”</p>\n\n<p>“This is the time we have to make a stand. We have to make a stand and not back down to media and cancel culture,” he said. “We can’t live in fear this time. We got to all stand together. And I’m not talking politics. I’m talking people.”</p>\n</blockquote>\n\n<p>Lindell is also facing possible litigation from Dominion Voting Systems over his accusations that their machines and software contributed to election fraud in the general election. According to reports, Dominion sent a letter to Lindell last month warning of an “imminent” defamation lawsuit and telling Lindell to stop “making defamatory claims against Dominion.”</p>\n\n<p><strong>Lindell said he hopes Dominion will sue him so that he can present evidence.</strong></p>\n</div>\n      <span class=\"field field--name-uid field--type-entity-reference field--label-hidden\" rel=\"schema:author\"><a about=\"https://cms.zerohedge.com/users/tyler-durden\" class=\"username\" datatype=\"\" href=\"https://cms.zerohedge.com/users/tyler-durden\" lang=\"\" property=\"schema:name\" title=\"View user profile.\" typeof=\"schema:Person\" xml:lang=\"\">Tyler Durden</a></span>\n<span class=\"field field--name-created field--type-created field--label-hidden\" content=\"2021-01-26T12:38:09+00:00\" property=\"schema:dateCreated\">Tue, 01/26/2021 - 07:38</span><img alt=\"\" height=\"1\" src=\"http://feeds.feedburner.com/~r/zerohedge/feed/~4/2WITJx7ft70\" width=\"1\" />",
       :published "2021-01-26T12:38:09Z",
       :num 28,
       :feed "83562883711106",
       :title
       "MyPillow CEO Mike Lindell Has Been Permanently Banned From Twitter"}

#+end_example

#+begin_src clojure :results pp
(d/q '[:find (pull ?e [*])
       :where (?e :feed/url _)]
     (d/db s/db-conn))
#+end_src

#+RESULTS:
#+begin_example
[[{:db/id 79164837199971,
   :feed/url "http://sgolub.ru/feed/",
   :feed/title "АВТОРСКИЙ ПРОЕКТ СЕРГЕЯ ГОЛУБИЦКОГО",
   :feed/summary "Авторский проект Сергея Голубицкого",
   :feed/image
   "http://sgolub.ru/wp-content/uploads/image/4/cropped-sgolub2014_sm2-32x32.jpg"}]
 [{:db/id 79164837209002,
   :feed/url "https://www.archlinux.org/feeds/news/",
   :feed/title "Arch Linux: Recent news updates",
   :feed/summary
   "The latest and greatest news from the Arch Linux distribution."}]
 [{:db/id 83562883714910,
   :feed/url "http://feeds.feedburner.com/PythonInsider",
   :feed/title "Python Insider",
   :feed/published "2021-10-14T05:57:27.179-04:00"}]
 [{:db/id 83562883721314,
   :feed/url "https://bikepost.ru/rss/index/",
   :feed/title "БайкПост",
   :feed/summary "БайкПост / RSS channel"}]
 [{:db/id 83562883726309,
   :feed/url "https://exler.ru/films/rss.xml",
   :feed/title "Exler.ru",
   :feed/summary "Кинорецензии"}]
 [{:db/id 87960930222207,
   :feed/url "https://news.ycombinator.com/rss",
   :feed/title "Hacker News",
   :feed/summary
   "Links for the intellectually curious, ranked by readers."}]
 [{:db/id 87960930231160,
   :feed/url "https://clojure.org/feed.xml",
   :feed/title "Clojure News",
   :feed/summary "Clojure News",
   :feed/published "2021-10-14T16:47:17Z"}]
 [{:db/id 87960930232158,
   :feed/url "http://blog.cleancoder.com/atom.xml",
   :feed/title "The Clean Code Blog",
   :feed/published "2021-09-25T15:47:52+00:00"}]
 [{:db/id 87960930232195,
   :feed/url "https://www.kommersant.ru/RSS/Autopilot_on.xml",
   :feed/title "Коммерсантъ Автопилот. Online и Новости",
   :feed/summary
   "ИД \"Коммерсантъ\" - Коммерсантъ Автопилот. Online и Новости",
   :feed/image "https://im.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 87960930239514,
   :feed/url "https://www.kommersant.ru/RSS/section-world.xml",
   :feed/title "\"Коммерсантъ\". В мире",
   :feed/summary "Материалы раздела \"В мире\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976737250,
   :feed/url "https://www.kommersant.ru/RSS/section-politics.xml",
   :feed/title "\"Коммерсантъ\". Политика",
   :feed/summary "Материалы раздела \"Политика\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976737503,
   :feed/url "http://4pda.ru/feed/",
   :feed/title "4PDA",
   :feed/summary "RSS-лента 4PDA"}]
 [{:db/id 92358976743133,
   :feed/url "https://www.kommersant.ru/RSS/section-hitech.xml",
   :feed/title "\"Коммерсантъ Hi-Tech\"",
   :feed/summary "Материалы раздела \"Hi-Tech\"",
   :feed/image "http://www.kommersant.ru/pics/yatlogo.gif"}]
 [{:db/id 92358976746147,
   :feed/url "http://feeds.arstechnica.com/arstechnica/index/",
   :feed/title "Ars Technica",
   :feed/summary
   "Serving the Technologist for more than a decade. IT news, reviews, and analysis.",
   :feed/image
   "https://cdn.arstechnica.net/wp-content/uploads/2016/10/cropped-ars-logo-512_480-32x32.png"}]
 [{:db/id 92358976748901,
   :feed/url "https://content.novayagazeta.ru/rss/all.xml",
   :feed/title "Новая Газета",
   :feed/summary
   "Журналистские расследования о коррупции в бизнесе и во власти, специальные репортажи с событий политической и культурной жизни, главные новости, галереи, онлайн-кинотеатр, мнения и рецензии ведущих журналистов и экспертов страны",
   :feed/image
   "https://content.novayagazeta.ru/assets/rss-6b5763e8155006d9365b340599231d9eb0fa9418d847b50387c087918531804c.png"}]
 [{:db/id 96757023253490,
   :feed/url "https://www.anandtech.com/rss/",
   :feed/title "AnandTech",
   :feed/summary
   "This channel features the latest computer hardware related articles.",
   :feed/image "http://www.anandtech.com/content/images/rss_logo.png"}]
 [{:db/id 96757023256601,
   :feed/url "http://rss.slashdot.org/Slashdot/slashdotMain",
   :feed/title "Slashdot",
   :feed/summary "News for nerds, stuff that matters",
   :feed/image ""}]
 [{:db/id 101155069759377,
   :feed/url "http://www.opennet.ru/opennews/opennews_all.rss",
   :feed/title "OpenNews.opennet.ru: Общая лента новостей",
   :feed/summary
   "OpenNews - Новости мира открытых систем (Общая лента новостей)"}]
 [{:db/id 101155069764563,
   :feed/url "http://4pda.to/feed/",
   :feed/title "4PDA",
   :feed/summary "RSS-лента 4PDA"}]
 [{:db/id 101155069770926,
   :feed/url "https://xkcd.com/atom.xml",
   :feed/title "xkcd.com",
   :feed/published "2021-10-13T00:00:00Z"}]
 [{:db/id 101155069787727,
   :feed/url "https://kiwibyrd.org/feed/",
   :feed/title "kiwi  arXiv",
   :feed/summary
   "СЮЖЕТЫ & РАССЛЕДОВАНИЯ: мемориально-футуристический склад им. Киви Бёрда (1998-2018)",
   :feed/image "https://s0.wp.com/i/buttonw-com.png"}]
 [{:db/id 105553116280785,
   :feed/url "https://www.computerra.ru/feed/",
   :feed/title "Компьютерра",
   :feed/summary
   "Компьютерра — все новости про новые технологии, IT, инновации, интернет и науку.",
   :feed/image
   "https://www.computerra.ru/wp-content/uploads/2020/10/cropped-dummy.jpg"}]
 [{:db/id 105553116292313,
   :feed/url "http://comicfeeds.chrisbenard.net/view/dilbert/default",
   :feed/title "Dilbert Daily Strip",
   :feed/published "2021-10-15T00:00:00-07:00"}]
 [{:db/id 105553116297227,
   :feed/url "https://lenta.ru/rss",
   :feed/title "Lenta.ru : Новости",
   :feed/summary
   "Новости, статьи, фотографии, видео. Семь дней в неделю, 24 часа в сутки.",
   :feed/image "https://lenta.ru/images/small_logo.png"}]
 [{:db/id 105553116300794,
   :feed/url "http://static.feed.rbc.ru/rbc/logical/footer/news.rss",
   :feed/title "www.rbc.ru",
   :feed/summary "",
   :feed/published "2021-06-08T16:52:42Z",
   :feed/image "http://pics.rbc.ru/img/fp_v4/skin/img/v6-logo.png"}]
 [{:db/id 114349209310844,
   :feed/url "https://www.archlinux.org/feeds/packages/",
   :feed/title "Arch Linux: Recent package updates",
   :feed/summary
   "Recently updated packages in the Arch Linux package repositories."}]
 [{:db/id 114349209312756,
   :feed/url "https://habr.com/ru/rss/best/daily/",
   :feed/title "Лучшие публикации за сутки",
   :feed/summary "Лучшие публикации за последние 24 часа",
   :feed/published "2021-10-15T13:13:11Z",
   :feed/image
   "https://habrastorage.org/webt/ym/el/wk/ymelwk3zy1gawz4nkejl_-ammtc.png"}]
 [{:db/id 114349209314888,
   :feed/url "https://www.zerohedge.com/fullrss2.xml",
   :feed/title "ZeroHedge News",
   :feed/summary ""}]
 [{:db/id 114349209321077,
   :feed/url "http://feeds.feedburner.com/zerohedge/feed",
   :feed/title "ZeroHedge News",
   :feed/summary ""}]]

#+end_example

#+name: scratch
#+begin_src clojure :results pp :wrap src clojure
(letfn [(safe-parse [xml]
         (try
           (xml/parse xml)
           (catch Exception e nil)))]
  (->> (fs/list-dir (fs/expand-home "~/devel/fc-stat/rss"))
       (take 1024)
       (map #(do (println (str %)) %))
       (map safe-parse)
       (filter some?)
       ;(map f/extract-rss-items)
       ;(map #(map f/parse-rss-item %))
       count
))
#+end_src

#+RESULTS: scratch
#+begin_src clojure
13
#+end_src


#+begin_src clojure :results pp :wrap src clojure
(send f/feed-index f/init-feed-index "fc-data")
#+end_src

#+RESULTS:
#+begin_src clojure
#<Agent@775609e6: 
  {"http://sgolub.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
    :item-count 26,
    :known-ids
    #{"http://sgolub.ru/?p=13463" "http://sgolub.ru/?p=13611"
      "http://sgolub.ru/?p=13654" "http://sgolub.ru/?p=13520"
      "http://sgolub.ru/?p=13558" "http://sgolub.ru/?p=13684"
      "http://sgolub.ru/?p=13551" "http://sgolub.ru/?p=13458"
      "http://sgolub.ru/?p=13505" "http://sgolub.ru/?p=13511"
      "http://sgolub.ru/?p=13564" "http://sgolub.ru/?p=13584"
      "http://sgolub.ru/?p=13546" "http://sgolub.ru/?p=13580"
      "http://sgolub.ru/?p=13515" "http://sgolub.ru/?p=13473"
      "http://sgolub.ru/?p=13526" "http://sgolub.ru/?p=13538"
      "http://sgolub.ru/?p=13477" "http://sgolub.ru/?p=13643"
      "http://sgolub.ru/?p=13530" "http://sgolub.ru/?p=13571"
      "http://sgolub.ru/?p=13576" "http://sgolub.ru/?p=13595"
      "http://sgolub.ru/?p=13602" "http://sgolub.ru/?p=13534"}},
   "https://news.ycombinator.com/rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss"},
   "http://www.opennet.ru/opennews/opennews_all.rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss"},
   "https://www.kommersant.ru/RSS/section-politics.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml"},
   "http://4pda.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed."},
   "https://clojure.org/feed.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
    :item-count 25,
    :known-ids
    #{"news/2011/07/22/introducing-clojurescript"
      "news/2014/08/06/transducers-are-coming"
      "news/2012/05/08/reducers" "news/2012/02/17/clojure-governance"
      "news/2016/01/19/clojure18"
      "news/2018/03/19/state-of-clojure-2018"
      "news/2013/06/28/clojure-clore-async-channels"
      "news/2019/02/04/state-of-clojure-2019"
      "news/2012/05/15/anatomy-of-reducer"
      "news/2020/01/07/clojure-2020-survey" "news/2018/01/05/git-deps"
      "news/2019/06/06/clojure1-10-1"
      "news/2019/01/07/clojure-2019-survey"
      "news/2015/06/30/clojure-17"
      "news/2016/01/28/state-of-clojure-2015"
      "news/2016/05/23/introducing-clojure-spec"
      "news/2019/07/25/clojure-forum"
      "news/2020/07/23/cognitect-joins-nubank"
      "news/2017/12/08/clojure19" "news/2019/05/16/jira-migration"
      "news/2020/02/28/clojure-tap"
      "news/2020/02/20/state-of-clojure-2020"
      "news/2017/01/31/state-of-clojure-2016"
      "news/2018/12/17/clojure110"
      "news/2016/01/14/clojure-org-live"}},
   "https://www.archlinux.org/feeds/news/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news."},
   "https://www.anandtech.com/rss/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss."},
   "https://www.kommersant.ru/RSS/section-hitech.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml"},
   "http://blog.cleancoder.com/atom.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml"},
   "https://www.kommersant.ru/RSS/Autopilot_on.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml"},
   "https://bikepost.ru/rss/index/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index."},
   "http://rss.slashdot.org/Slashdot/slashdotMain"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain"},
   "http://feeds.arstechnica.com/arstechnica/index/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index."},
   "https://www.computerra.ru/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed."},
   "https://exler.ru/films/rss.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml"},
   "https://xkcd.com/atom.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml"},
   "https://content.novayagazeta.ru/rss/all.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml"},
   "https://www.kommersant.ru/RSS/section-world.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml"},
   "https://www.archlinux.org/feeds/packages/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages."},
   "https://habr.com/ru/rss/best/daily/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/habr.com.ru.rss.best.daily."},
   "http://comicfeeds.chrisbenard.net/view/dilbert/default"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default"},
   "https://www.zerohedge.com/fullrss2.xml"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml"},
   "https://lenta.ru/rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss"},
   "https://kiwibyrd.org/feed/"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
    :item-count 27,
    :known-ids
    #{"http://kiwibyrd.org/?p=3987" "http://kiwibyrd.org/?p=4020"
      "http://kiwibyrd.org/?p=4075" "http://kiwibyrd.org/?p=4102"
      "http://kiwibyrd.org/?p=4081" "http://kiwibyrd.org/?p=4093"
      "http://kiwibyrd.org/?p=4068" "http://kiwibyrd.org/?p=3994"
      "http://kiwibyrd.org/?p=4175" "http://kiwibyrd.org/?p=4041"
      "http://kiwibyrd.org/?p=4152" "http://kiwibyrd.org/?p=4165"
      "http://kiwibyrd.org/?p=3989" "http://kiwibyrd.org/?p=4181"
      "http://kiwibyrd.org/?p=3964" "http://kiwibyrd.org/?p=3977"
      "http://kiwibyrd.org/?p=4003" "http://kiwibyrd.org/?p=4233"
      "http://kiwibyrd.org/?p=4144" "http://kiwibyrd.org/?p=4210"
      "http://kiwibyrd.org/?p=4028" "http://kiwibyrd.org/?p=4136"
      "http://kiwibyrd.org/?p=4113" "http://kiwibyrd.org/?p=4222"
      "http://kiwibyrd.org/?p=4050" "http://kiwibyrd.org/?p=4056"
      "http://kiwibyrd.org/?p=3970"}},
   "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
   {:dir
    "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}}>
#+end_src

#+begin_src clojure :results pp :wrap src clojure
@f/feed-index
#+end_src

#+RESULTS:
#+begin_src clojure
{"http://sgolub.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
  :item-count 26,
  :known-ids
  #{"http://sgolub.ru/?p=13463" "http://sgolub.ru/?p=13611"
    "http://sgolub.ru/?p=13654" "http://sgolub.ru/?p=13520"
    "http://sgolub.ru/?p=13558" "http://sgolub.ru/?p=13684"
    "http://sgolub.ru/?p=13551" "http://sgolub.ru/?p=13458"
    "http://sgolub.ru/?p=13505" "http://sgolub.ru/?p=13511"
    "http://sgolub.ru/?p=13564" "http://sgolub.ru/?p=13584"
    "http://sgolub.ru/?p=13546" "http://sgolub.ru/?p=13580"
    "http://sgolub.ru/?p=13515" "http://sgolub.ru/?p=13473"
    "http://sgolub.ru/?p=13526" "http://sgolub.ru/?p=13538"
    "http://sgolub.ru/?p=13477" "http://sgolub.ru/?p=13643"
    "http://sgolub.ru/?p=13530" "http://sgolub.ru/?p=13571"
    "http://sgolub.ru/?p=13576" "http://sgolub.ru/?p=13595"
    "http://sgolub.ru/?p=13602" "http://sgolub.ru/?p=13534"}},
 "https://news.ycombinator.com/rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss"},
 "http://www.opennet.ru/opennews/opennews_all.rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss"},
 "https://www.kommersant.ru/RSS/section-politics.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml"},
 "http://4pda.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed."},
 "https://clojure.org/feed.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
  :item-count 25,
  :known-ids
  #{"news/2011/07/22/introducing-clojurescript"
    "news/2014/08/06/transducers-are-coming" "news/2012/05/08/reducers"
    "news/2012/02/17/clojure-governance" "news/2016/01/19/clojure18"
    "news/2018/03/19/state-of-clojure-2018"
    "news/2013/06/28/clojure-clore-async-channels"
    "news/2019/02/04/state-of-clojure-2019"
    "news/2012/05/15/anatomy-of-reducer"
    "news/2020/01/07/clojure-2020-survey" "news/2018/01/05/git-deps"
    "news/2019/06/06/clojure1-10-1"
    "news/2019/01/07/clojure-2019-survey" "news/2015/06/30/clojure-17"
    "news/2016/01/28/state-of-clojure-2015"
    "news/2016/05/23/introducing-clojure-spec"
    "news/2019/07/25/clojure-forum"
    "news/2020/07/23/cognitect-joins-nubank"
    "news/2017/12/08/clojure19" "news/2019/05/16/jira-migration"
    "news/2020/02/28/clojure-tap"
    "news/2020/02/20/state-of-clojure-2020"
    "news/2017/01/31/state-of-clojure-2016"
    "news/2018/12/17/clojure110" "news/2016/01/14/clojure-org-live"}},
 "https://www.archlinux.org/feeds/news/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news."},
 "https://www.anandtech.com/rss/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss."},
 "https://www.kommersant.ru/RSS/section-hitech.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml"},
 "http://blog.cleancoder.com/atom.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml"},
 "https://www.kommersant.ru/RSS/Autopilot_on.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml"},
 "https://bikepost.ru/rss/index/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index."},
 "http://rss.slashdot.org/Slashdot/slashdotMain"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain"},
 "http://feeds.arstechnica.com/arstechnica/index/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index."},
 "https://www.computerra.ru/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed."},
 "https://exler.ru/films/rss.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml"},
 "https://xkcd.com/atom.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml"},
 "https://content.novayagazeta.ru/rss/all.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml"},
 "https://www.kommersant.ru/RSS/section-world.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml"},
 "https://www.archlinux.org/feeds/packages/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages."},
 "https://habr.com/ru/rss/best/daily/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/habr.com.ru.rss.best.daily."},
 "http://comicfeeds.chrisbenard.net/view/dilbert/default"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default"},
 "https://www.zerohedge.com/fullrss2.xml"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml"},
 "https://lenta.ru/rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss"},
 "https://kiwibyrd.org/feed/"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
  :item-count 27,
  :known-ids
  #{"http://kiwibyrd.org/?p=3987" "http://kiwibyrd.org/?p=4020"
    "http://kiwibyrd.org/?p=4075" "http://kiwibyrd.org/?p=4102"
    "http://kiwibyrd.org/?p=4081" "http://kiwibyrd.org/?p=4093"
    "http://kiwibyrd.org/?p=4068" "http://kiwibyrd.org/?p=3994"
    "http://kiwibyrd.org/?p=4175" "http://kiwibyrd.org/?p=4041"
    "http://kiwibyrd.org/?p=4152" "http://kiwibyrd.org/?p=4165"
    "http://kiwibyrd.org/?p=3989" "http://kiwibyrd.org/?p=4181"
    "http://kiwibyrd.org/?p=3964" "http://kiwibyrd.org/?p=3977"
    "http://kiwibyrd.org/?p=4003" "http://kiwibyrd.org/?p=4233"
    "http://kiwibyrd.org/?p=4144" "http://kiwibyrd.org/?p=4210"
    "http://kiwibyrd.org/?p=4028" "http://kiwibyrd.org/?p=4136"
    "http://kiwibyrd.org/?p=4113" "http://kiwibyrd.org/?p=4222"
    "http://kiwibyrd.org/?p=4050" "http://kiwibyrd.org/?p=4056"
    "http://kiwibyrd.org/?p=3970"}},
 "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
 {:dir
  "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}}
#+end_src


#+begin_src clojure :results output
(m/_run-srv)
#+end_src

#+RESULTS:
#+begin_example
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.stat invoke
INFO: Starting statistics collection
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.feed invoke
INFO: Starting sync by the timer
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.stat invoke
INFO: Collecting statistics for  http://sgolub.ru/feed/
2020-11-24 18:46:22.990:INFO:oejs.Server:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.8+10
нояб. 24, 2020 6:46:22 PM feedcircuit-revisited.feed invoke
INFO: Getting news from http://sgolub.ru/feed/
2020-11-24 18:46:23.020:INFO:oejs.AbstractConnector:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: Started ServerConnector@52bb0385{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
2020-11-24 18:46:23.020:INFO:oejs.Server:nREPL-session-9db53d66-b7e8-484c-bcf6-7b4aa9030059: Started @15808ms
#+end_example

#+begin_src clojure :results pp
(m/_restart-srv)
#+end_src

#+RESULTS:
: #'feedcircuit-revisited.main/_srv
: 2020-10-10 15:54:02.952:INFO:oejs.AbstractConnector:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Stopped ServerConnector@43a4a014{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
: 2020-10-10 15:54:02.954:INFO:oejs.Server:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.8+10
: 2020-10-10 15:54:02.956:INFO:oejs.AbstractConnector:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Started ServerConnector@da12376{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}
: 2020-10-10 15:54:02.956:INFO:oejs.Server:nREPL-session-88bac6bb-a57c-4f63-a4d4-aa7c092e07f1: Started @13293357ms

#+begin_src clojure :results pp :wrap src clojure
(f/sync!)
#+end_src

#+RESULTS:
#+BEGIN_src clojure
(["https://news.ycombinator.com/rss" 30]
 ["https://clojure.org/feed.xml" 0]
 ["https://www.archlinux.org/feeds/news/" 0]
 ["https://www.anandtech.com/rss/" 0]
 ["http://blog.cleancoder.com/atom.xml" 0]
 ["http://rss.slashdot.org/Slashdot/slashdotMain" 15]
 ["http://feeds.arstechnica.com/arstechnica/index/" 0]
 ["https://www.computerra.ru/feed/" 1]
 ["https://xkcd.com/atom.xml" 0]
 ["https://www.kommersant.ru/RSS/section-world.xml" 3]
 ["https://www.zerohedge.com/fullrss2.xml" 1]
 ["http://static.feed.rbc.ru/rbc/logical/footer/news.rss" 1])
июн. 08, 2020 9:56:03 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://news.ycombinator.com/rss
июн. 08, 2020 9:56:04 AM feedcircuit-revisited.feed invoke
INFO: Got 30 item from https://news.ycombinator.com/rss
июн. 08, 2020 9:56:04 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://clojure.org/feed.xml
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://clojure.org/feed.xml
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.archlinux.org/feeds/news/
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://www.archlinux.org/feeds/news/
июн. 08, 2020 9:56:05 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.anandtech.com/rss/
июн. 08, 2020 9:56:07 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://www.anandtech.com/rss/
июн. 08, 2020 9:56:07 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://blog.cleancoder.com/atom.xml
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from http://blog.cleancoder.com/atom.xml
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://rss.slashdot.org/Slashdot/slashdotMain
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 15 item from http://rss.slashdot.org/Slashdot/slashdotMain
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://feeds.arstechnica.com/arstechnica/index/
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from http://feeds.arstechnica.com/arstechnica/index/
июн. 08, 2020 9:56:08 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.computerra.ru/feed/
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from https://www.computerra.ru/feed/
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://xkcd.com/atom.xml
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Got 0 item from https://xkcd.com/atom.xml
июн. 08, 2020 9:56:09 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.kommersant.ru/RSS/section-world.xml
июн. 08, 2020 9:56:10 AM feedcircuit-revisited.feed invoke
INFO: Got 3 item from https://www.kommersant.ru/RSS/section-world.xml
июн. 08, 2020 9:56:10 AM feedcircuit-revisited.feed invoke
INFO: Getting news from https://www.zerohedge.com/fullrss2.xml
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from https://www.zerohedge.com/fullrss2.xml
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Getting news from http://static.feed.rbc.ru/rbc/logical/footer/news.rss
июн. 08, 2020 9:56:13 AM feedcircuit-revisited.feed invoke
INFO: Got 1 item from http://static.feed.rbc.ru/rbc/logical/footer/news.rss
#+END_src

#+begin_src clojure :results pp :wrap src clojure
@f/feed-dir
#+end_src

#+RESULTS:
#+BEGIN_src clojure
{"http://sgolub.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/sgolub.ru.feed.",
 "https://news.ycombinator.com/rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/news.ycombinator.com.rss",
 "http://www.opennet.ru/opennews/opennews_all.rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.opennet.ru.opennews.opennews_all.rss",
 "https://www.kommersant.ru/RSS/section-politics.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-politics.xml",
 "http://4pda.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/4pda.ru.feed.",
 "https://clojure.org/feed.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/clojure.org.feed.xml",
 "https://www.archlinux.org/feeds/news/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.news.",
 "https://www.anandtech.com/rss/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.anandtech.com.rss.",
 "https://www.kommersant.ru/RSS/section-hitech.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-hitech.xml",
 "http://blog.cleancoder.com/atom.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/blog.cleancoder.com.atom.xml",
 "https://www.kommersant.ru/RSS/Autopilot_on.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.Autopilot_on.xml",
 "https://bikepost.ru/rss/index/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/bikepost.ru.rss.index.",
 "http://rss.slashdot.org/Slashdot/slashdotMain"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/rss.slashdot.org.Slashdot.slashdotMain",
 "http://feeds.arstechnica.com/arstechnica/index/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/feeds.arstechnica.com.arstechnica.index.",
 "https://www.computerra.ru/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.computerra.ru.feed.",
 "https://exler.ru/films/rss.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/exler.ru.films.rss.xml",
 "https://xkcd.com/atom.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/xkcd.com.atom.xml",
 "https://content.novayagazeta.ru/rss/all.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/content.novayagazeta.ru.rss.all.xml",
 "https://www.kommersant.ru/RSS/section-world.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.kommersant.ru.RSS.section-world.xml",
 "https://www.archlinux.org/feeds/packages/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.archlinux.org.feeds.packages.",
 "http://comicfeeds.chrisbenard.net/view/dilbert/default"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/comicfeeds.chrisbenard.net.view.dilbert.default",
 "https://www.zerohedge.com/fullrss2.xml"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/www.zerohedge.com.fullrss2.xml",
 "https://lenta.ru/rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/lenta.ru.rss",
 "https://kiwibyrd.org/feed/"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/kiwibyrd.org.feed.",
 "http://static.feed.rbc.ru/rbc/logical/footer/news.rss"
 "/home/georgy/devel/feedcircuit-revisited/fc-data/feeds/static.feed.rbc.ru.rbc.logical.footer.news.rss"}
#+END_src

#+begin_src clojure :results pp :wrap src clojure
(c/detect (c/retrieve-and-parse "https://bikepost.ru/blog/91216/Ocherednoj-raz-vokrug-Ladogi.html") "https://bikepost.ru" nil)
#+end_src

#+RESULTS:
#+BEGIN_src clojure
class java.net.MalformedURLExceptionclass java.lang.NullPointerExceptionExecution error (NullPointerException) at java.net.URL/<init> (URL.java:585).
null
#+END_src

#+begin_src restclient
POST http://localhost:8080/selected
Cookie: sessionid=bqn1psy1rdw0lt2ky1gj25b246j4pmaf; ring-session=6nzW7ugyC7mtjrvf0cEPl8p0YuPdp2v5TrpOkGH0ktuoLFZ5vLYjE3OPKBlUthOcpE9qs%2B8IrAhrwI5rCVH7RoGnj3WCKvbSr81U0jtQvw5TD8XAXXVvw2tPdxzIN79D--UbgPoufD0NaRHjlahfABuco0LfEV31LEkJWGLjOyCl8%3D
Content-Type: application/x-www-form-urlencoded

id=https://www.exler.ru/films/vampiry-srednej-polosy.htm
#+end_src

#+RESULTS:
#+BEGIN_SRC js
// POST http://localhost:8080/selected
// HTTP/1.1 200 OK
// Date: Sat, 29 May 2021 17:18:47 GMT
// Content-Type: application/octet-stream
// X-XSS-Protection: 1; mode=block
// X-Frame-Options: SAMEORIGIN
// X-Content-Type-Options: nosniff
// Content-Length: 0
// Server: Jetty(9.4.22.v20191022)
// Request duration: 1.246895s
#+END_SRC
